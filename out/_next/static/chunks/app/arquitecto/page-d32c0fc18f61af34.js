(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{4760:function(e,t,n){Promise.resolve().then(n.bind(n,255))},255:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(7437),a=n(2265),r=n(6463),o=n(495),c=n(6013),i=n(3146),l=n(837),d=n(2721),u=n(5137),m=n(3274),p=n(994),f=n(2940),h=n(2023),x=n(7164),v=n(6264),j=n(7440);function g(){var e;let t=(0,r.useRouter)(),n=(0,a.useRef)(null),[g,y]=(0,a.useState)(""),[N,w]=(0,a.useState)([{id:(0,j.O)(),role:"assistant",content:'\xa1Hola! Soy tu Arquitecto AWS experto. Vamos a crear una propuesta profesional paso a paso.\n\n**PASO 1:** Para comenzar, necesito que me digas \xfanicamente el **nombre del proyecto**.\n\nEjemplos:\n• "E-commerce Platform"\n• "Sistema de Inventario" \n• "Portal de Clientes"\n• "App de Delivery"\n\n\xbfCu\xe1l es el nombre de tu proyecto?',timestamp:new Date().toISOString()}]),[b,S]=(0,a.useState)(!1),[C,T]=(0,a.useState)("amazon.nova-pro-v1:0"),[_,P]=(0,a.useState)([]),[k,E]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),[L,O]=(0,a.useState)({phase:"inicio",data:{}}),U=()=>{var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{U()},[N]);let R=async()=>{if(!g.trim()||b)return;let e={id:(0,j.O)(),role:"user",content:g.trim(),timestamp:new Date().toISOString()};w(t=>[...t,e]);let t=[...N,e];y(""),S(!0);try{let e=await (0,v.YL)({messages:t.map(e=>({role:e.role,content:e.content})),selected_model:C}),n={id:(0,j.O)(),role:"assistant",content:e.response||"Lo siento, no pude generar una respuesta.",timestamp:new Date().toISOString(),mcpServices:e.mcpServicesUsed||[]};w(e=>[...e,n]),e.mcpServicesUsed&&e.mcpServicesUsed.length>0&&P(e.mcpServicesUsed),e.projectState&&O(t=>({...t,...e.projectState})),e.documentsGenerated&&Array.isArray(e.documentsGenerated)&&e.documentsGenerated.length>0&&(I({projectId:e.projectId||(0,j.O)(),projectName:L.name||"Proyecto AWS",documentsGenerated:e.documentsGenerated}),E(!0))}catch(e){console.error("Error:",e),w(t=>[...t,{id:(0,j.O)(),role:"assistant",content:"Error: ".concat(e.message),timestamp:new Date().toISOString()}])}finally{S(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>t.push("/"),children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Inicio"]}),(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"Arquitecto AWS"})]}),(0,s.jsx)(d.O,{selectedModel:C,onModelChange:T})]})})}),(0,s.jsx)("div",{className:"bg-blue-50 border-b px-4 py-2",children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm text-blue-700",children:["Fase: ",L.phase," ",L.name?"• ".concat(L.name):""]})]}),L.type&&(0,s.jsxs)("span",{className:"text-sm text-blue-700",children:["Tipo: ",L.type]})]})})}),_.length>0&&(0,s.jsx)("div",{className:"bg-purple-50 border-b px-4 py-2",children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),(0,s.jsxs)("span",{className:"text-sm text-purple-700",children:["\uD83D\uDD27 MCP Services: ",_.join(", ")]})]})})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl space-y-4",children:[N.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)(c.Zb,{className:"max-w-[80%] ".concat("user"===e.role?"bg-blue-500 text-white":"bg-white border"),children:(0,s.jsxs)(c.aY,{className:"p-4",children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs opacity-70",children:[(0,s.jsx)("span",{children:(0,j.p)(e.timestamp)}),e.mcpServices&&e.mcpServices.length>0&&(0,s.jsxs)("span",{children:["MCP: ",e.mcpServices.join(", ")]})]})]})})},e.id)),(0,s.jsx)("div",{ref:n})]})}),(0,s.jsx)("div",{className:"border-t bg-white p-4",children:(0,s.jsx)("div",{className:"container mx-auto max-w-4xl",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.g,{value:g,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},placeholder:"Responde las preguntas del arquitecto...",className:"flex-1 min-h-[60px] resize-none",disabled:b}),(0,s.jsx)(o.z,{onClick:R,disabled:!g.trim()||b,size:"lg",children:b?(0,s.jsx)(m.Z,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(p.Z,{className:"h-4 w-4"})})]})})}),(0,s.jsx)(l.Vq,{open:k,onOpenChange:E,children:(0,s.jsxs)(l.cZ,{className:"max-w-md",children:[(0,s.jsx)(l.fK,{children:(0,s.jsxs)(l.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 text-green-500"}),"\xa1Proyecto Generado!"]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Se ha generado exitosamente el proyecto: ",(0,s.jsx)("strong",{children:null==A?void 0:A.projectName})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Documentos generados:"}),(0,s.jsx)("ul",{className:"text-sm space-y-1",children:null==A?void 0:null===(e=A.documentsGenerated)||void 0===e?void 0:e.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-blue-500"}),e.name]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.z,{onClick:()=>t.push("/projects"),className:"flex-1",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Ver en Proyectos"]}),(0,s.jsx)(o.z,{variant:"outline",onClick:()=>E(!1),children:"Continuar"})]})]})]})})]})}},837:function(e,t,n){"use strict";n.d(t,{$N:function(){return p},Vq:function(){return i},cZ:function(){return u},fK:function(){return m}});var s=n(7437),a=n(2265),r=n(8793),o=n(4697),c=n(7440);let i=r.fC;r.xz;let l=r.h_;r.x8;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});d.displayName=r.aV.displayName;let u=a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,s.jsxs)(l,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[a,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};m.displayName="DialogHeader";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});p.displayName=r.Dx.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",n),...a})}).displayName=r.dk.displayName},6264:function(e,t,n){"use strict";n.d(t,{Rt:function(){return c},YL:function(){return r},mW:function(){return o}});var s=n(357);let a="https://jvdvd1qcdj.execute-api.us-east-1.amazonaws.com/prod";async function r(e){try{let t=await fetch("".concat(a,"/arquitecto"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Arquitecto API error: ".concat(t.status));let n=await t.json();return{...n,mode:n.mode||"arquitecto",mcpServicesUsed:n.mcpServicesUsed||[],mcpResults:n.mcpResults||{},transparency:n.transparency||null,promptUnderstanding:n.promptUnderstanding||null}}catch(e){throw console.error("Error sending arquitecto request:",e),e}}async function o(){let e=await fetch("".concat(a,"/projects"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Projects API error: ".concat(e.status," ").concat(e.statusText));let t=await e.json();return t.projects&&Array.isArray(t.projects)?t.projects:Array.isArray(t)?t:(console.warn("Unexpected API response structure:",t),[])}async function c(){let e=new Date().toISOString(),t=!1,n={};try{let e=new AbortController,n=setTimeout(()=>e.abort(),5e3),s=await fetch("".concat(a,"/health"),{method:"GET",signal:e.signal});clearTimeout(n),t=s.ok}catch(e){console.warn("Legacy API health check failed:",e)}let r=[{name:"core",url:s.env.NEXT_PUBLIC_CORE_MCP_URL},{name:"pricing",url:s.env.NEXT_PUBLIC_PRICING_MCP_URL},{name:"awsdocs",url:s.env.NEXT_PUBLIC_AWSDOCS_MCP_URL},{name:"diagram",url:s.env.NEXT_PUBLIC_DIAGRAM_MCP_URL},{name:"cfn",url:s.env.NEXT_PUBLIC_CFN_MCP_URL},{name:"docgen",url:s.env.NEXT_PUBLIC_DOCGEN_MCP_URL}];await Promise.allSettled(r.map(async e=>{if(!e.url){n[e.name]=!1;return}try{let t=new AbortController,s=setTimeout(()=>t.abort(),3e3),a=await fetch("".concat(e.url,"/health"),{method:"GET",signal:t.signal});clearTimeout(s),n[e.name]=a.ok}catch(t){console.warn("MCP ".concat(e.name," health check failed:"),t),n[e.name]=!1}}));let o=Object.values(n).some(e=>e);return{status:t||o?"healthy":"unhealthy",timestamp:e,legacy_api:t,mcp_servers:n}}},5137:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},994:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n(8030).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},357:function(e,t,n){"use strict";var s,a;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,s,a=e.exports={};function r(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var i=[],l=!1,d=-1;function u(){l&&s&&(l=!1,s.length?i=s.concat(i):d=-1,i.length&&m())}function m(){if(!l){var e=c(u);l=!0;for(var t=i.length;t;){for(s=i,i=[];++d<t;)s&&s[d].run();d=-1,t=i.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new p(e,t)),1!==i.length||l||c(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}},o=!0;try{t[e](r,r.exports,s),o=!1}finally{o&&delete n[e]}return r.exports}s.ab="//";var a=s(229);e.exports=a}()}},function(e){e.O(0,[737,609,229,971,23,744],function(){return e(e.s=4760)}),_N_E=e.O()}]);